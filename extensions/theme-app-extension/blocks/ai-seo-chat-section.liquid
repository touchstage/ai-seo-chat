{% comment %}
  AI SEO Chat Section Block
  This block can be added to any section and will display the chat widget
{% endcomment %}

<div class="ai-seo-chat-section" style="padding: 2rem 0; background: {{ block.settings.background_color | default: '#f8f9fa' }};">
  <div class="page-width">
    <div class="ai-seo-chat-content" style="text-align: center;">
      <h2 style="margin-bottom: 1rem; color: {{ block.settings.text_color | default: '#333' }};">
        {{ block.settings.heading | default: 'Need Help? Chat with AI' }}
      </h2>
      <p style="margin-bottom: 2rem; color: {{ block.settings.text_color | default: '#333' }}; opacity: 0.8; max-width: 600px; margin-left: auto; margin-right: auto;">
        {{ block.settings.description | default: 'Get instant answers to your questions about our products, shipping, returns, and more with our AI-powered chat assistant.' }}
      </p>
      
      <button 
        onclick="if(window.AIChatWidget) window.AIChatWidget.open()"
        style="
          padding: 1rem 2rem;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border: none;
          border-radius: 30px;
          cursor: pointer;
          font-size: 16px;
          font-weight: 600;
          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
          transition: all 0.3s ease;
        "
        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.4)'"
        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.3)'"
      >
        {{ block.settings.button_text | default: 'Start Chat Now' }}
      </button>
    </div>
  </div>
</div>

{%- comment -%} Chat Widget Injection {%- endcomment -%}
<script>
  // Load chat widget script
  (function() {
    const script = document.createElement('script');
    script.src = '{{ shop.secure_url }}/apps/seo/chat-widget.js';
    script.async = true;
    script.onload = function() {
      console.log('AI SEO Chat widget loaded');
    };
    script.onerror = function() {
      console.error('Failed to load AI SEO Chat widget');
    };
    document.head.appendChild(script);
  })();
</script>

{% schema %}
{
  "name": "AI SEO Chat",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Need Help? Chat with AI"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Get instant answers to your questions about our products, shipping, returns, and more with our AI-powered chat assistant."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Start Chat Now"
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    }
  ]
}
{% endschema %}
